# IP 주소 체계와 서브네팅

## 📝 개요
IP 주소는 네트워크상에서 각 장치를 식별하는 논리적 주소입니다. 서브네팅은 하나의 네트워크를 여러 개의 작은 네트워크로 분할하는 기술입니다.

## 🔢 IPv4 주소 구조

### 기본 형태
- **형식**: 32비트 (4바이트)를 8비트씩 나누어 점으로 구분
- **표기법**: XXX.XXX.XXX.XXX (0~255)
- **예시**: 192.168.1.1

### 주소 구성
```
네트워크 부분 | 호스트 부분
Network ID   | Host ID
```

## 📊 클래스별 분류

| 클래스 | 첫 번째 옥텟 | 기본 서브넷 마스크 | 네트워크 수 | 호스트 수 |
|--------|-------------|-------------------|------------|-----------|
| **A** | 1-126 | 255.0.0.0 (/8) | 126 | 16,777,214 |
| **B** | 128-191 | 255.255.0.0 (/16) | 16,384 | 65,534 |
| **C** | 192-223 | 255.255.255.0 (/24) | 2,097,152 | 254 |
| **D** | 224-239 | 멀티캐스트 | - | - |
| **E** | 240-255 | 실험용 | - | - |

### 특수 주소
- **127.x.x.x**: 루프백 주소 (localhost)
- **0.0.0.0**: 모든 네트워크
- **255.255.255.255**: 브로드캐스트 주소

## 🏠 사설 IP 주소 (RFC 1918)

| 클래스 | 사설 IP 범위 | CIDR 표기 |
|--------|-------------|-----------|
| A | 10.0.0.0 - 10.255.255.255 | 10.0.0.0/8 |
| B | 172.16.0.0 - 172.31.255.255 | 172.16.0.0/12 |
| C | 192.168.0.0 - 192.168.255.255 | 192.168.0.0/16 |

### 특수 목적 주소
- **169.254.0.0/16**: APIPA (자동 사설 IP)
- **127.0.0.0/8**: 루프백
- **224.0.0.0/4**: 멀티캐스트
- **240.0.0.0/4**: 실험용

## 🎭 서브넷 마스크

### 개념
- 네트워크 부분과 호스트 부분을 구분하는 32비트 값
- 연속된 1로 시작하여 연속된 0으로 끝남

### 표기법
1. **십진수 표기**: 255.255.255.0
2. **CIDR 표기**: /24
3. **이진수 표기**: 11111111.11111111.11111111.00000000

### 일반적인 서브넷 마스크
| CIDR | 서브넷 마스크 | 호스트 수 | 용도 |
|------|-------------|-----------|------|
| /30 | 255.255.255.252 | 2 | Point-to-Point 링크 |
| /29 | 255.255.255.248 | 6 | 소규모 네트워크 |
| /28 | 255.255.255.240 | 14 | 작은 부서 |
| /27 | 255.255.255.224 | 30 | 중간 부서 |
| /26 | 255.255.255.192 | 62 | 큰 부서 |
| /25 | 255.255.255.128 | 126 | 대형 부서 |
| /24 | 255.255.255.0 | 254 | 표준 LAN |

## 🧮 서브네팅 계산

### VLSM (Variable Length Subnet Masking)
효율적인 IP 주소 할당을 위해 서로 다른 서브넷 마스크 사용

### 서브네팅 단계
1. **요구사항 분석**: 필요한 서브넷 수와 호스트 수
2. **비트 계산**: 2^n 공식 사용
3. **서브넷 마스크 결정**
4. **서브넷 주소 계산**

### 계산 예시: 192.168.1.0/24를 4개 서브넷으로 분할

```
원본 네트워크: 192.168.1.0/24

필요한 서브넷: 4개 → 2^2 = 4 (2비트 필요)
새로운 서브넷 마스크: /24 + 2 = /26

서브넷 목록:
1. 192.168.1.0/26   (192.168.1.1 - 192.168.1.62)
2. 192.168.1.64/26  (192.168.1.65 - 192.168.1.126)
3. 192.168.1.128/26 (192.168.1.129 - 192.168.1.190)
4. 192.168.1.192/26 (192.168.1.193 - 192.168.1.254)
```

### 마법의 숫자 (Magic Number)
```
서브넷 마스크가 255.255.255.192 (/26)인 경우:
마법의 숫자 = 256 - 192 = 64

서브넷 경계: 0, 64, 128, 192
```

## 🎯 서브네팅 실전 팁

### 빠른 계산법
1. **2의 거듭제곱 암기**: 2, 4, 8, 16, 32, 64, 128, 256
2. **서브넷 마스크 값 암기**: 128, 192, 224, 240, 248, 252, 254, 255
3. **비트와 호스트 수 관계**: 2^n - 2 (네트워크 주소와 브로드캐스트 주소 제외)

### 문제 풀이 접근법
1. **주어진 정보 정리**
2. **필요한 서브넷/호스트 수 확인**
3. **비트 수 계산**
4. **새로운 서브넷 마스크 계산**
5. **서브넷 주소 나열**

## 🌐 IPv6 기초

### 주소 형태
- **길이**: 128비트 (16바이트)
- **표기법**: 16진수로 8그룹, 콜론으로 구분
- **예시**: 2001:0db8:85a3:0000:0000:8a2e:0370:7334

### 주소 축약 규칙
1. **선행 0 제거**: 0001 → 1
2. **연속된 0 그룹**: :: 사용 (한 번만)
3. **예시**: 2001:db8::8a2e:370:7334

### IPv6 주소 유형
- **유니캐스트**: 단일 인터페이스
- **멀티캐스트**: 그룹 전송
- **애니캐스트**: 가장 가까운 하나

## 🛠️ Cisco IOS 명령어

### IP 주소 확인
```cisco
show ip interface brief
show ip route
show interfaces
```

### IP 주소 설정
```cisco
interface gigabitethernet0/1
ip address 192.168.1.1 255.255.255.0
no shutdown
```

### 서브넷 정보 확인
```cisco
show ip interface
show running-config interface gi0/1
```

## 🔧 문제해결

### 일반적인 문제
1. **잘못된 서브넷 마스크**: 통신 불가
2. **중복 IP 주소**: IP 충돌
3. **잘못된 기본 게이트웨이**: 다른 네트워크 접근 불가

### 진단 명령어
```cisco
ping 192.168.1.1
traceroute 8.8.8.8
show arp
```

## 📝 실습 문제

### 문제 1: 기본 서브네팅
192.168.10.0/24 네트워크를 8개의 동일한 서브넷으로 나누시오.

### 문제 2: VLSM
192.168.0.0/24를 다음 요구사항에 맞게 서브네팅하시오:
- 부서 A: 60개 호스트 필요
- 부서 B: 30개 호스트 필요
- 부서 C: 12개 호스트 필요
- Point-to-Point 링크: 2개

## 🔗 관련 주제
- [[TCP-IP 모델|TCP/IP 모델]] - IP 프로토콜의 위치
- [[라우팅 기초|라우팅]] - IP 주소 기반 경로 설정
- [[VLAN 구성|VLAN]] - 논리적 네트워크 분할
- [[NAT-PAT|NAT/PAT]] - 사설 IP와 공인 IP 변환

## 🏷️ 태그
#ccna #ip주소 #서브네팅 #vlsm #ipv4 #ipv6 #네트워크설계 #주소계획